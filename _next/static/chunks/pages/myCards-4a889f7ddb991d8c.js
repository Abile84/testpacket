(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1897],{17753:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/myCards",function(){return n(10609)}])},79018:function(t,e,n){"use strict";n.d(e,{XD:function(){return s},YJ:function(){return c},eF:function(){return a}});let a="0x42d5CF6D84cea0dE5dE5094d3226C9125434a161",s="0x9f3F548c28EC1E607c926D8aC059b800EC4A3233",c="0x87c692201acbD287EB09CfF1d2fB4781644c5937"},10609:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return MyCards}});var a=n(85893),s=n(29035),c=n(36612),i=n.n(c),r=n(79018),d=n(67294),l=n(87536),o=n(11163);let ListingInfo=t=>{let{nft:e}=t,n=(0,s.SFn)(),c=(0,o.useRouter)(),{contract:d}=(0,s.cqn)(r.YJ,"marketplace-v3"),{contract:u}=(0,s.cqn)(r.XD),{mutateAsync:p}=(0,s.gZ8)(d);async function checkAndProvideApproval(){let t=await (null==u?void 0:u.call("isApprovedForAll",[n,r.YJ]));if(!t){let t=await (null==u?void 0:u.call("setApprovalForAll",[r.YJ,!0]));t&&console.log(t)}return!0}let{register:f,handleSubmit:x}=(0,l.cI)({defaultValues:{nftContractAddress:r.XD,tokenId:null==e?void 0:e.metadata.id,price:"0",startDate:new Date,endDate:new Date}});async function onSubmit(t){await checkAndProvideApproval();let e=await p({assetContractAddress:t.nftContractAddress,tokenId:t.tokenId,pricePerToken:t.price,startTimestamp:new Date(t.startDate),endTimestamp:new Date(t.endDate)});return e}return(0,a.jsxs)("div",{className:i().listingInfo,children:[(0,a.jsx)("p",{children:"Start date:"}),(0,a.jsx)("input",{type:"datetime-local",...f("startDate")}),(0,a.jsx)("p",{children:"End date:"}),(0,a.jsx)("input",{type:"datetime-local",...f("endDate")}),(0,a.jsx)("p",{children:"Price:"}),(0,a.jsx)("input",{type:"number",step:.01,...f("price")}),(0,a.jsx)("br",{}),(0,a.jsx)(s.tnh,{contractAddress:r.YJ,action:async()=>{await x(onSubmit)()},onSuccess:()=>{console.log("success"),c.push("/marketplace")},children:"List for sale"})]})};function MyCards(){let t=(0,s.SFn)(),{contract:e,isLoading:n}=(0,s.cqn)(r.XD,"edition"),{data:c,isLoading:l}=(0,s.YZw)(e,t);console.log(c);let[o,u]=(0,d.useState)();return(0,a.jsxs)("div",{className:i().container,children:[(0,a.jsx)("h1",{children:"My Cards"}),(0,a.jsx)("div",{className:i().grid,children:o?(0,a.jsxs)("div",{className:i().saleCard,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>u(void 0),children:"Back"}),(0,a.jsx)("br",{}),(0,a.jsx)(s.CHu,{metadata:o.metadata})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"List card for sale"}),(0,a.jsx)(ListingInfo,{nft:o})]})]}):n||l?(0,a.jsx)("p",{children:"Loading..."}):null==c?void 0:c.map((t,e)=>(0,a.jsxs)("div",{className:i().nftCard,children:[(0,a.jsx)(s.CHu,{metadata:t.metadata}),(0,a.jsxs)("div",{className:i().myCardInfo,children:[(0,a.jsx)("h3",{children:t.metadata.name}),(0,a.jsxs)("p",{children:["Qty: ",t.quantityOwned]})]}),(0,a.jsx)("button",{onClick:()=>u(t),className:i().saleButton,children:"Sell Card"})]},e))})]})}}},function(t){t.O(0,[6998,9774,2888,179],function(){return t(t.s=17753)}),_N_E=t.O()}]);